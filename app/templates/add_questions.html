{% extends "base.html" %}
{% block title %}Добавление вопросов{% endblock %}
{% block content %}
<h3>Добавление вопросов для теста: {{ test.title }}</h3>

<!-- Форма для добавления нового вопроса -->
<form method="post" enctype="multipart/form-data">
    <label>Текст вопроса:</label><br>
    <textarea name="question_text" rows="4" cols="50" placeholder="Введите текст вопроса"></textarea><br><br>

    <label>Изображение для вопроса (опционально):</label>
    <input type="file" name="question_image"><br><br>

    <label>Варианты ответа (по одному варианту в строке, если требуется):</label><br>
    <textarea name="options" rows="4" cols="50" placeholder="Введите варианты ответа, по одному на строке"></textarea><br><br>

    <label>Номера правильных вариантов (через запятую, например: 1,3):</label>
    <input type="text" name="correct_options" placeholder="Введите номера правильных вариантов"><br><br>

    <input type="submit" value="Добавить вопрос">
    <!-- Кнопка для очистки формы (не обязательна) -->
    <input type="button" value="Очистить форму" onclick="this.form.reset();">
</form>

<br>
<!-- Кнопка для завершения создания вопросов -->
<a href="{{ url_for('main.dashboard') }}" style="font-weight:bold;">Завершить создание вопросов и вернуться в кабинет</a>

<hr>
<h4>Добавленные вопросы:</h4>
{% if questions|length > 0 %}
    {% for question in questions %}
        <div>
            <strong>Вопрос {{ loop.index }}:</strong> {{ question.text }}<br>
            {% if question.image_path %}
                <img src="{{ url_for('main.download_file', filename=question.image_path) }}" alt="Изображение вопроса" style="max-width:300px;"><br>
            {% endif %}
            {% if question.options %}
                <ul>
                    {% for opt in question.options %}
                        <li>{{ opt.option_text }} {% if opt.is_correct %}(правильный){% endif %}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <hr>
    {% endfor %}
{% else %}
    <p>Вопросы еще не добавлены.</p>
{% endif %}
{% endblock %}
